<div class="row">
  <div class="small-6 columns">
    <h3>Contacts</h3>
  </div>
  <div class="small-6 columns text-right">
    <a id="newcontact" class="button tiny topright" ng-click="contactFormShown = true">New contact</a>
  </div>
</div>
<div class="row">
  <div class="small-12 columns">
    <table class="expand">
      <thead>
        <tr>
          <th>Name</th>
          <th>Address</th>
          <th class="text-right">Copy/QR/Edit/Delete</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="contact in identity.contacts.contacts" ng-class="{editrow: contactFormShown === $index}">
          <td ng-hide="contactFormShown === $index">
            <identicon icon-size="20" hash="contact.hash" title="{{contact.hash}}"></identicon> {{contact.name}}
          </td>
          <td ng-hide="contactFormShown === $index">{{contact.address}}</td>
          <td class="text-right" ng-hide="contactFormShown === $index">
            <button ng-click="copyClipboard(contact.address)" class="button square fa fa-clipboard"></button>
            <button ng-click="openModal('show-qr', {address: contact.address})" class="button square fa fa-qrcode"></button>
            <button ng-click="contactFormShown = $index" class="button square fa fa-edit"></button>
            <button ng-click="openModal('confirm-delete-contact', {contact: contact}, deleteContact)" class="button square alert fa fa-trash-o"></button>
            <!--<button ng-click="deleteContact(contact)" class="button square alert fa fa-trash-o"></button>-->
          </td>
          <td ng-show="contactFormShown === $index">
            <form ng-submit="contactFormShown = false; editContact(contact)">
              <input class="contact-name" ng-model="contact.name" type="text" placeholder="Write a new contact name" />
            </form>
          </td>
          <td ng-show="contactFormShown === $index">{{contact.address}}</td>
          <td class="text-right" ng-show="contactFormShown === $index"><button ng-click="contactFormShown = false; editContact(contact)" class="button small">Save</button></td>
        </tr>
      </tbody>
    </table>
    <form ng-submit="createContact()" ng-show="contactFormShown === true">
    <div class="row collapse">
      <div class="large-3 columns"><input ng-model="newContact.name" type="text" placeholder="Write a new contact name" /></div>  
      <div class="large-5 columns"><input ng-model="newContact.address" type="text" placeholder="Enter a bitcoin address here or use the buttons on the right." /></div>
      <div class="large-2 columns"><a href="" ng-click="newContact.address = pasteClipboard()" class="button postfix fa fa-clipboard">Paste</a></div>
      <div class="large-2 columns"><a href="" ng-click="openModal('scan-qr', {field: field}, onQrModalOk, onQrModalCancel)" class="button postfix fa fa-qrcode">Scan</a></div>
    </div>
    <div class="row text-right">
       <div class="small-12 columns">
		<a href="" ng-click="contactFormShown = false" class="button alert small">Cancel</a>
		<input type="submit" class="button small" value="Save" />
	   </div>
	</div>
    </form>
  </div>
</div>

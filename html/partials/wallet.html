<div class="row">
  <div class="large-2 columns panel">
    <ul class="side-nav">
      <li>Pockets on my wallet</li>
      <li ng-class="{true:'active', false:''}[selectedPocket===undefined]" class="active" ng-click="selectPocket()"><a>All</a></li>
      <li ng-class="{true:'active', false:''}[$index==selectedPocket]" ng-repeat="pocketName in identity.wallet.pockets" ng-click="selectPocket(pocketName, $index)" ><a>{{pocketName}}</a></li>
      <li ng-show="creatingPocket">
        <form ng-submit="createPocket()">
          <input type="text" id="pocketNameInput" ng-model="newPocketName" placeholder="Name your pocket..." />
          <input type="submit" class="button small expand" value="Ok"/>
        </form>
      </li>
      <li ng-hide="creatingPocket">
        <a class="button small expand radius" ng-click="createPocket()">New Pocket</a>
      </li>
      <li class="divider"></li>
      <li>My multisig funds</li>
      <li><a href="">Unsystem</a></li>
      <li><a href="">Multisig 3</a></li>
      <li><a class="button small expand radius" ng-click="openModal('newmultisig')">New Multisig fund</a></li>
      <li class="divider"></li>
      <li>Watch-only pockets</li>
      <li><a href="">My smartphone</a></li>
      <li><a href="">My cold wallet</a></li>
      <li><a class="button small expand radius">Add watch-only pocket</a></li>
    </ul>
  </div>
  <div class="large-10 columns">
    <h4>{{pocket.name}} <small>{{((balance===undefined)?totalBalance:balance) | currencyFilter}} BTC</small></h4>
    <tabset>
      <tab heading="History">
        <table class="expand">
          <thead>
            <tr>
              <th>Name</th>
              <th>Amount</th>
              <th class="text-right">Balance</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="row in history">
              <td class="icon"><a class="button square fa fa-info"></a>{{row.address}}</td>
              <td>{{(row.myOutValue-row.myInValue) | currencyFilter}}</td>
              <td class="text-right">{{row.balance | currencyFilter}}</td>
            </tr>
          </tbody>
        </table>
      </tab>
      <tab heading="Addresses">
        <div class="panel" ng-hide="isAll">
        <div class="row collapse">
          <div class="medium-2 columns">
            <span class="prefix radius">Stealth Address</span>
          </div>
          <div class="medium-6 columns">
            <input type="text" disabled="true" value="{{pocket.stealth}}" />
          </div>
          <div class="medium-2 columns">
            <button ng-click="copyClipboard(pocket.stealth)" class="button postfix fa fa-clipboard">Copy</button>
          </div>
          <div class="medium-2 columns">
            <button ng-click="openModal('show-qr', {address: pocket.stealth})" class="button postfix radius fa fa-qrcode">QR</button>
          </div>
        </div>
        <div class="row collapse">
          <div class="medium-2 columns">
            <span class="prefix radius">Master Address</span>
          </div>
          <div class="medium-6 columns">
            <input type="text" class="nomarginbottom" disabled="true" value="{{pocket.mpk}}" />
          </div>
          <div class="medium-2 columns">
            <button ng-click="copyClipboard(pocket.mpk)" class="nomarginbottom button postfix fa fa-clipboard">Copy</button>
          </div>
          <div class="medium-2 columns">
            <button ng-click="openModal('show-qr', {address: pocket.mpk, version: 7})" class="nomarginbottom button postfix radius fa fa-qrcode">QR</button>
          </div>
        </div>
        </div>         
        <table class="expand">
          <thead>
          <th>Name</th>
          <th>Address</th>
          <th>Balance</th>
          <th class="text-right">QR Code / Copy</th>
          </thead>
          <tbody>
          <tr ng-repeat="address in pocket.addresses track by $index" ng-show="address.nOutputs == 0">
            <td class="icon"><a href="" class="button square fa fa-pencil-square"></a>{{address.label}}</td>
            <td>{{address.address}}</td>
            <td>0</td>
            <td class="icon text-right"><a href="" ng-click="openModal('show-qr', {address: address.address})" class="button square fa fa-qrcode"></a><a href="" ng-click="copyClipboard(address.address)" class="button square fa fa-clipboard"></a></td>
          </tr>
          <tr ng-repeat="address in pocket.addresses track by $index" ng-show="address.nOutputs != 0">
            <td class="icon"><a class="button square fa fa-edit"></a>{{address.label}}</td>
            <td>{{address.address}}</td>
            <td>{{address.balance | currencyFilter}}</td>
            <td class="icon text-right"><a href="" ng-click="openModal('show-qr', {address: address.address})" class="button square fa fa-qrcode"></a><a href="" ng-click="copyClipboard(address.address)" class="button square fa fa-clipboard"></a></td>
          </tr>
        </tbody>
        </table>
        <a class="button small" ng-click="generateAddress(pocket.index)">New address</a>
      </tab>
      <tab heading="Actions" ng-hide="isAll">
        <div class="row">
          <div class="large-6 columns">
            <a href="" class="fa button postfix fa-share">Move funds to another pocket</a>
            <a href="" class="fa button postfix fa-check-square-o">Automatically mix funds on this pocket with CoinJoin</a>
          </div>
          <div class="large-6 columns">
            <a href="#" class="fa button postfix fa-reply-all">Move funds to another identity</a>
            <div class="row">
              <div class="small-6 columns">
                <a href="" class="fa button postfix fa-terminal">Rename pocket</a>
              </div>
              <div class="small-6 columns">
                <a href="" class="fa button alert postfix fa-trash-o">Delete pocket</a>
              </div>
            </div>
          </div>
        </div>
      </tab>
    </tabset>
  </div>
</div>


<script type="text/ng-template" id="newmultisig">
    <h3>Start a Multisig fund</h3>
    <span>Multisig funds are wallets that require multiple passwords in order to spend the funds. Useful when you need to manage a wallet between multiple people or devices.</span>
    <h4>Name</h4>
    <input type="text" placeholder="Name your multisig fund..." />
    <h4>Other than you, who will manage this fund?</h4>
    <button class="button small radius">Select from contacts</button>
    <button class="button small radius">Scan a QR code</button>
    <button class="button small radius">Paste a Master/Stealth address</button>
    <h4>How many signatures will be needed in order to spend?</h4>
    <div class="row collapse">
        <div class="small-6 columns">
          <input type="number" />
        </div>
        <div class="small-6 columns">
          <span class="postfix radius">Out of N signatures</span>
        </div>
    </div>
    <input type="submit" class="button glow radius" value="Start multisig" />
    <a class="close-reveal-modal" ng-click="cancel()">&#215;</a>
</script>
<script type="text/ng-template" id="show-qr">
    <h3>Scan this QR</h3>
    <qrcode data="{{vars.address}}" version={{vars.version}} size=200></qrcode>
    <a class="close-reveal-modal" ng-click="cancel()">&#215;</a>
</script>
